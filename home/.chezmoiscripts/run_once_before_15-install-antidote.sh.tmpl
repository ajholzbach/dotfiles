{{- if or (eq .chezmoi.os "darwin") (eq .chezmoi.os "linux") -}}
#!/usr/bin/env bash
set -euo pipefail

if ! command -v git >/dev/null 2>&1; then
    echo "Error: git is required but not installed"
    echo "Please install git and try again"
    exit 1
fi

ANTIDOTE_DIR="$HOME/.antidote"

if [ -f "$ANTIDOTE_DIR/antidote.zsh" ]; then
    echo "Antidote is already installed at $ANTIDOTE_DIR"
    exit 0
fi

echo "Installing antidote zsh plugin manager..."
git clone --depth=1 https://github.com/mattmc3/antidote.git "$ANTIDOTE_DIR"
echo "Antidote installed successfully at $ANTIDOTE_DIR"
{{- end }}
